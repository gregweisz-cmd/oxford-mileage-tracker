# Google Cloud Console - Mobile OAuth Setup

## üî¥ Current Error

```
Access blocked: Authorization Error
```

This means the redirect URI from your mobile app isn't configured in Google Cloud Console.

---

## üîç Find Your Redirect URI

When you try to sign in, check your mobile app console/logs. You should see:
```
üîç Google OAuth Redirect URI: [URL HERE]
```

**Copy that exact URL** - it needs to be added to Google Cloud Console.

---

## ‚úÖ Step-by-Step Fix

### Step 1: Find Your Redirect URI

The redirect URI is generated by Expo based on:
- Your Expo username: `goosew27` (from app.json `"owner"`)
- Your app slug: `oh-staff-tracker` (from app.json `"slug"`)

**Expected format:**
```
https://auth.expo.io/@goosew27/oh-staff-tracker
```

**OR** if using custom scheme:
```
ohstafftracker://oauth
```

**Check your console logs to see the exact one!**

---

### Step 2: Add to Google Cloud Console

1. **Go to:** https://console.cloud.google.com

2. **Navigate:**
   - APIs & Services ‚Üí Credentials

3. **Click on your OAuth Client ID:**
   - `893722301667-bqc8ir7q35omj6s84l7ackvqoqrhtrv6.apps.googleusercontent.com`

4. **Scroll to "Authorized redirect URIs"**

5. **Click "+ ADD URI"**

6. **Add the redirect URI from your console log:**
   - Example: `https://auth.expo.io/@goosew27/oh-staff-tracker`
   - Or: `ohstafftracker://oauth`
   - **Must match EXACTLY** (case-sensitive)

7. **Click "SAVE"**

8. **Wait 1-2 minutes** for changes to propagate

---

## üìã Complete Redirect URI List

After adding mobile redirect URI, you should have:

**Authorized redirect URIs:**
```
https://oxford-mileage-backend.onrender.com/api/auth/google/callback
http://localhost:3002/api/auth/google/callback
https://auth.expo.io/@goosew27/oh-staff-tracker  ‚Üê ADD THIS (or check console for exact one)
```

**Authorized JavaScript origins:**
```
https://oxford-mileage-backend.onrender.com
https://oxford-mileage-tracker-git-main-goose-weiszs-projects.vercel.app
http://localhost:3002
```

---

## üîç Troubleshooting

### If Still Not Working:

1. **Check OAuth Consent Screen:**
   - APIs & Services ‚Üí OAuth consent screen
   - Make sure app name, email, etc. are filled in
   - If in "Testing" mode, add test users' emails

2. **Verify Redirect URI Match:**
   - The URI must match EXACTLY (case-sensitive)
   - No trailing slashes
   - Full path included

3. **Check Client ID:**
   - Make sure you're using: `893722301667-bqc8ir7q35omj6s84l7ackvqoqrhtrv6.apps.googleusercontent.com`
   - Should be "Web application" type

---

## ‚úÖ Quick Checklist

- [ ] Check console logs for exact redirect URI
- [ ] Go to Google Cloud Console
- [ ] APIs & Services ‚Üí Credentials
- [ ] Click your OAuth Client ID
- [ ] Add the redirect URI from logs
- [ ] Save changes
- [ ] Wait 1-2 minutes
- [ ] Try Google sign-in again

---

**The redirect URI from your console logs must be added to Google Cloud Console for mobile OAuth to work!**

